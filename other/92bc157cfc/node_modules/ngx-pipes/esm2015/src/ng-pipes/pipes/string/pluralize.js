import { Pipe } from '@angular/core';
import { isVowel } from '../helpers/helpers';
/**
 * Takes a singular entity string and pluralizes it.
 * Uses both naive and holdout-list approaches.
 * If several words appear in the string, only the last word is pluralized -- this
 * means that if "your story" was passed in, "your stories" would be passed out.
 *
 * @param {string} singularEntity - Entity to pluralize. Pass as a singular ('story' or 'house').
 *          NOTE: The last word is examined. So you can pass in e.g. 'my story'.
 * @param {number} [quantity=0] quantity - How many of the entity are there? If left blank, this will
 *          pluralize the string (e.g. 'story' -> 'stories', 'house' -> 'houses'). If given a value,
 *          this will pluralize appropriately (e.g. ('story', 1) -> 'story', ('story', 2) -> 'stories').
 */
export class MakePluralStringPipe {
    constructor() {
        this.irregularMap = {
            addendum: 'addenda',
            alga: 'algae',
            alumna: 'alumnae',
            alumnus: 'alumni',
            analysis: 'analyses',
            antenna: 'antennae',
            appendix: 'appendices',
            aquarium: 'aquaria',
            arch: 'arches',
            axe: 'axes',
            axis: 'axes',
            bacillus: 'bacilli',
            bacterium: 'bacteria',
            basis: 'bases',
            batch: 'batches',
            beach: 'beaches',
            beau: 'beaux',
            bison: 'bison',
            brush: 'brushes',
            buffalo: 'buffaloes',
            bureau: 'bureaus',
            bus: 'busses',
            cactus: 'cacti',
            calf: 'calves',
            chateau: 'chateaux',
            cherry: 'cherries',
            child: 'children',
            church: 'churches',
            circus: 'circuses',
            cod: 'cod',
            corps: 'corps',
            corpus: 'corpora',
            crisis: 'crises',
            criterion: 'criteria',
            curriculum: 'curricula',
            datum: 'data',
            deer: 'deer',
            diagnosis: 'diagnoses',
            die: 'dice',
            domino: 'dominoes',
            dwarf: 'dwarves',
            echo: 'echoes',
            elf: 'elves',
            ellipsis: 'ellipses',
            embargo: 'embargoes',
            emphasis: 'emphases',
            erratum: 'errata',
            fax: 'faxes',
            fireman: 'firemen',
            fish: 'fish',
            flush: 'flushes',
            focus: 'foci',
            foot: 'feet',
            formula: 'formulas',
            fungus: 'fungi',
            genus: 'genera',
            goose: 'geese',
            grafito: 'grafiti',
            half: 'halves',
            hero: 'heroes',
            hoax: 'hoaxes',
            hoof: 'hooves',
            hypothesis: 'hypotheses',
            index: 'indices',
            kiss: 'kisses',
            knife: 'knives',
            leaf: 'leaves',
            life: 'lives',
            loaf: 'loaves',
            louse: 'lice',
            man: 'men',
            mango: 'mangoes',
            matrix: 'matrices',
            means: 'means',
            medium: 'media',
            memorandum: 'memoranda',
            millennium: 'milennia',
            moose: 'moose',
            mosquito: 'mosquitoes',
            motto: 'mottoes',
            mouse: 'mice',
            nebula: 'nebulae',
            neurosis: 'neuroses',
            nucleus: 'nuclei',
            oasis: 'oases',
            octopus: 'octopodes',
            ovum: 'ova',
            ox: 'oxen',
            paralysis: 'paralyses',
            parenthesis: 'parentheses',
            person: 'people',
            phenomenon: 'phenomena',
            plateau: 'plateaux',
            potato: 'potatoes',
            quiz: 'quizzes',
            radius: 'radii',
            reflex: 'reflexes',
            'runner-up': 'runners-up',
            scampo: 'scampi',
            scarf: 'scarves',
            scissors: 'scissors',
            scratch: 'scratches',
            self: 'selves',
            series: 'series',
            sheaf: 'sheaves',
            sheep: 'sheep',
            shelf: 'shelves',
            'son-in-law': 'sons-in-law',
            species: 'species',
            splash: 'splashes',
            stimulus: 'stimuli',
            stitch: 'stitches',
            stratum: 'strata',
            syllabus: 'syllabi',
            symposium: 'symposia',
            synopsis: 'synopses',
            synthesis: 'syntheses',
            tableau: 'tableaux',
            tax: 'taxes',
            that: 'those',
            thesis: 'theses',
            thief: 'thieves',
            this: 'these',
            tomato: 'tomatoes',
            tooth: 'teeth',
            tornado: 'tornadoes',
            torpedo: 'torpedoes',
            vertebra: 'vertebrae',
            veto: 'vetoes',
            vita: 'vitae',
            volcano: 'volcanoes',
            waltz: 'waltzes',
            wash: 'washes',
            watch: 'watches',
            wharf: 'wharves',
            wife: 'wives',
            wolf: 'wolves',
            woman: 'women',
            zero: 'zeroes',
        };
    }
    transform(singularEntity, quantity = 0) {
        if (!singularEntity || singularEntity === '') {
            return '';
        }
        if (quantity === 1) {
            return singularEntity;
        }
        else {
            const lastWord = singularEntity.trim().split(' ')[singularEntity.trim().split(' ').length - 1];
            if (this.irregularMap[lastWord.toLocaleLowerCase()]) {
                if (lastWord[0] === lastWord[0].toLocaleUpperCase()) {
                    return singularEntity.replace(lastWord, this.irregularMap[lastWord.toLocaleLowerCase()].replace(this.irregularMap[lastWord.toLocaleLowerCase()][0], this.irregularMap[lastWord.toLocaleLowerCase()][0].toLocaleUpperCase()));
                }
                return singularEntity.replace(lastWord, this.irregularMap[lastWord.toLocaleLowerCase()]);
            }
            else if (lastWord[lastWord.length - 1] === 'y') {
                // Naive approach:
                // consonant+y = word - 'y' +'ies'
                // vowel+y = word + 's'
                return isVowel(lastWord[lastWord.length - 2])
                    ? singularEntity + 's'
                    : singularEntity.replace(lastWord, lastWord.slice(0, -1) + 'ies');
            }
            else if (lastWord[lastWord.length - 1] === 's') {
                return singularEntity + 'es';
            }
            else {
                return singularEntity + 's';
            }
        }
    }
}
MakePluralStringPipe.decorators = [
    { type: Pipe, args: [{
                name: 'makePluralString',
            },] }
];
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGx1cmFsaXplLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vc3JjL25nLXBpcGVzL3BpcGVzL3N0cmluZy9wbHVyYWxpemUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLElBQUksRUFBaUIsTUFBTSxlQUFlLENBQUM7QUFDcEQsT0FBTyxFQUFFLE9BQU8sRUFBRSxNQUFNLG9CQUFvQixDQUFDO0FBTTdDOzs7Ozs7Ozs7OztHQVdHO0FBQ0gsTUFBTSxPQUFPLG9CQUFvQjtJQWhCakM7UUFpQlUsaUJBQVksR0FBUTtZQUMxQixRQUFRLEVBQUUsU0FBUztZQUNuQixJQUFJLEVBQUUsT0FBTztZQUNiLE1BQU0sRUFBRSxTQUFTO1lBQ2pCLE9BQU8sRUFBRSxRQUFRO1lBQ2pCLFFBQVEsRUFBRSxVQUFVO1lBQ3BCLE9BQU8sRUFBRSxVQUFVO1lBQ25CLFFBQVEsRUFBRSxZQUFZO1lBQ3RCLFFBQVEsRUFBRSxTQUFTO1lBQ25CLElBQUksRUFBRSxRQUFRO1lBQ2QsR0FBRyxFQUFFLE1BQU07WUFDWCxJQUFJLEVBQUUsTUFBTTtZQUNaLFFBQVEsRUFBRSxTQUFTO1lBQ25CLFNBQVMsRUFBRSxVQUFVO1lBQ3JCLEtBQUssRUFBRSxPQUFPO1lBQ2QsS0FBSyxFQUFFLFNBQVM7WUFDaEIsS0FBSyxFQUFFLFNBQVM7WUFDaEIsSUFBSSxFQUFFLE9BQU87WUFDYixLQUFLLEVBQUUsT0FBTztZQUNkLEtBQUssRUFBRSxTQUFTO1lBQ2hCLE9BQU8sRUFBRSxXQUFXO1lBQ3BCLE1BQU0sRUFBRSxTQUFTO1lBQ2pCLEdBQUcsRUFBRSxRQUFRO1lBQ2IsTUFBTSxFQUFFLE9BQU87WUFDZixJQUFJLEVBQUUsUUFBUTtZQUNkLE9BQU8sRUFBRSxVQUFVO1lBQ25CLE1BQU0sRUFBRSxVQUFVO1lBQ2xCLEtBQUssRUFBRSxVQUFVO1lBQ2pCLE1BQU0sRUFBRSxVQUFVO1lBQ2xCLE1BQU0sRUFBRSxVQUFVO1lBQ2xC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Q0FBQzs7O1lBbE1GLElBQUksU0FBQztnQkFDSixJQUFJLEVBQUUsa0JBQWtCO2FBQ3pCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUGlwZSwgUGlwZVRyYW5zZm9ybSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgaXNWb3dlbCB9IGZyb20gJy4uL2hlbHBlcnMvaGVscGVycyc7XG5cbkBQaXBlKHtcbiAgbmFtZTogJ21ha2VQbHVyYWxTdHJpbmcnLFxufSlcblxuLyoqXG4gKiBUYWtlcyBhIHNpbmd1bGFyIGVudGl0eSBzdHJpbmcgYW5kIHBsdXJhbGl6ZXMgaXQuXG4gKiBVc2VzIGJvdGggbmFpdmUgYW5kIGhvbGRvdXQtbGlzdCBhcHByb2FjaGVzLlxuICogSWYgc2V2ZXJhbCB3b3JkcyBhcHBlYXIgaW4gdGhlIHN0cmluZywgb25seSB0aGUgbGFzdCB3b3JkIGlzIHBsdXJhbGl6ZWQgLS0gdGhpc1xuICogbWVhbnMgdGhhdCBpZiBcInlvdXIgc3RvcnlcIiB3YXMgcGFzc2VkIGluLCBcInlvdXIgc3Rvcmllc1wiIHdvdWxkIGJlIHBhc3NlZCBvdXQuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHNpbmd1bGFyRW50aXR5IC0gRW50aXR5IHRvIHBsdXJhbGl6ZS4gUGFzcyBhcyBhIHNpbmd1bGFyICgnc3RvcnknIG9yICdob3VzZScpLlxuICogICAgICAgICAgTk9URTogVGhlIGxhc3Qgd29yZCBpcyBleGFtaW5lZC4gU28geW91IGNhbiBwYXNzIGluIGUuZy4gJ215IHN0b3J5Jy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbcXVhbnRpdHk9MF0gcXVhbnRpdHkgLSBIb3cgbWFueSBvZiB0aGUgZW50aXR5IGFyZSB0aGVyZT8gSWYgbGVmdCBibGFuaywgdGhpcyB3aWxsXG4gKiAgICAgICAgICBwbHVyYWxpemUgdGhlIHN0cmluZyAoZS5nLiAnc3RvcnknIC0+ICdzdG9yaWVzJywgJ2hvdXNlJyAtPiAnaG91c2VzJykuIElmIGdpdmVuIGEgdmFsdWUsXG4gKiAgICAgICAgICB0aGlzIHdpbGwgcGx1cmFsaXplIGFwcHJvcHJpYXRlbHkgKGUuZy4gKCdzdG9yeScsIDEpIC0+ICdzdG9yeScsICgnc3RvcnknLCAyKSAtPiAnc3RvcmllcycpLlxuICovXG5leHBvcnQgY2xhc3MgTWFrZVBsdXJhbFN0cmluZ1BpcGUgaW1wbGVtZW50cyBQaXBlVHJhbnNmb3JtIHtcbiAgcHJpdmF0ZSBpcnJlZ3VsYXJNYXA6IGFueSA9IHtcbiAgICBhZGRlbmR1bTogJ2FkZGVuZGEnLFxuICAgIGFsZ2E6ICdhbGdhZScsXG4gICAgYWx1bW5hOiAnYWx1bW5hZScsXG4gICAgYWx1bW51czogJ2FsdW1uaScsXG4gICAgYW5hbHlzaXM6ICdhbmFseXNlcycsXG4gICAgYW50ZW5uYTogJ2FudGVubmFlJyxcbiAgICBhcHBlbmRpeDogJ2FwcGVuZGljZXMnLFxuICAgIGFxdWFyaXVtOiAnYXF1YXJpYScsXG4gICAgYXJjaDogJ2FyY2hlcycsXG4gICAgYXhlOiAnYXhlcycsXG4gICAgYXhpczogJ2F4ZXMnLFxuICAgIGJhY2lsbHVzOiAnYmFjaWxsaScsXG4gICAgYmFjdGVyaXVtOiAnYmFjdGVyaWEnLFxuICAgIGJhc2lzOiAnYmFzZXMnLFxuICAgIGJhdGNoOiAnYmF0Y2hlcycsXG4gICAgYmVhY2g6ICdiZWFjaGVzJyxcbiAgICBiZWF1OiAnYmVhdXgnLFxuICAgIGJpc29uOiAnYmlzb24nLFxuICAgIGJydXNoOiAnYnJ1c2hlcycsXG4gICAgYnVmZmFsbzogJ2J1ZmZhbG9lcycsXG4gICAgYnVyZWF1OiAnYnVyZWF1cycsXG4gICAgYnVzOiAnYnVzc2VzJyxcbiAgICBjYWN0dXM6ICdjYWN0aScsXG4gICAgY2FsZjogJ2NhbHZlcycsXG4gICAgY2hhdGVhdTogJ2NoYXRlYXV4JyxcbiAgICBjaGVycnk6ICdjaGVycmllcycsXG4gICAgY2hpbGQ6ICdjaGlsZHJlbicsXG4gICAgY2h1cmNoOiAnY2h1cmNoZXMnLFxuICAgIGNpcmN1czogJ2NpcmN1c2VzJyxcbiAgICBjb2Q6ICdjb2QnLFxuICAgIGNvcnBzOiAnY29ycHMnLFxuICAgIGNvcnB1czogJ2NvcnBvcmEnLFxuICAgIGNyaXNpczogJ2NyaXNlcycsXG4gICAgY3JpdGVyaW9uOiAnY3JpdGVyaWEnLFxuICAgIGN1cnJpY3VsdW06ICdjdXJyaWN1bGEnLFxuICAgIGRhdHVtOiAnZGF0YScsXG4gICAgZGVlcjogJ2RlZXInLFxuICAgIGRpYWdub3NpczogJ2RpYWdub3NlcycsXG4gICAgZGllOiAnZGljZScsXG4gICAgZG9taW5vOiAnZG9taW5vZXMnLFxuICAgIGR3YXJmOiAnZHdhcnZlcycsXG4gICAgZWNobzogJ2VjaG9lcycsXG4gICAgZWxmOiAnZWx2ZXMnLFxuICAgIGVsbGlwc2lzOiAnZWxsaXBzZXMnLFxuICAgIGVtYmFyZ286ICdlbWJhcmdvZXMnLFxuICAgIGVtcGhhc2lzOiAnZW1waGFzZXMnLFxuICAgIGVycmF0dW06ICdlcnJhdGEnLFxuICAgIGZheDogJ2ZheGVzJyxcbiAgICBmaXJlbWFuOiAnZmlyZW1lbicsXG4gICAgZmlzaDogJ2Zpc2gnLFxuICAgIGZsdXNoOiAnZmx1c2hlcycsXG4gICAgZm9jdXM6ICdmb2NpJyxcbiAgICBmb290OiAnZmVldCcsXG4gICAgZm9ybXVsYTogJ2Zvcm11bGFzJyxcbiAgICBmdW5ndXM6ICdmdW5naScsXG4gICAgZ2VudXM6ICdnZW5lcmEnLFxuICAgIGdvb3NlOiAnZ2Vlc2UnLFxuICAgIGdyYWZpdG86ICdncmFmaXRpJyxcbiAgICBoYWxmOiAnaGFsdmVzJyxcbiAgICBoZXJvOiAnaGVyb2VzJyxcbiAgICBob2F4OiAnaG9heGVzJyxcbiAgICBob29mOiAnaG9vdmVzJyxcbiAgICBoeXBvdGhlc2lzOiAnaHlwb3RoZXNlcycsXG4gICAgaW5kZXg6ICdpbmRpY2VzJyxcbiAgICBraXNzOiAna2lzc2VzJyxcbiAgICBrbmlmZTogJ2tuaXZlcycsXG4gICAgbGVhZjogJ2xlYXZlcycsXG4gICAgbGlmZTogJ2xpdmVzJyxcbiAgICBsb2FmOiAnbG9hdmVzJyxcbiAgICBsb3VzZTogJ2xpY2UnLFxuICAgIG1hbjogJ21lbicsXG4gICAgbWFuZ286ICdtYW5nb2VzJyxcbiAgICBtYXRyaXg6ICdtYXRyaWNlcycsXG4gICAgbWVhbnM6ICdtZWFucycsXG4gICAgbWVkaXVtOiAnbWVkaWEnLFxuICAgIG1lbW9yYW5kdW06ICdtZW1vcmFuZGEnLFxuICAgIG1pbGxlbm5pdW06ICdtaWxlbm5pYScsXG4gICAgbW9vc2U6ICdtb29zZScsXG4gICAgbW9zcXVpdG86ICdtb3NxdWl0b2VzJyxcbiAgICBtb3R0bzogJ21vdHRvZXMnLFxuICAgIG1vdXNlOiAnbWljZScsXG4gICAgbmVidWxhOiAnbmVidWxhZScsXG4gICAgbmV1cm9zaXM6ICduZXVyb3NlcycsXG4gICAgbnVjbGV1czogJ251Y2xlaScsXG4gICAgb2FzaXM6ICdvYXNlcycsXG4gICAgb2N0b3B1czogJ29jdG9wb2RlcycsXG4gICAgb3Z1bTogJ292YScsXG4gICAgb3g6ICdveGVuJyxcbiAgICBwYXJhbHlzaXM6ICdwYXJhbHlzZXMnLFxuICAgIHBhcmVudGhlc2lzOiAncGFyZW50aGVzZXMnLFxuICAgIHBlcnNvbjogJ3Blb3BsZScsXG4gICAgcGhlbm9tZW5vbjogJ3BoZW5vbWVuYScsXG4gICAgcGxhdGVhdTogJ3BsYXRlYXV4JyxcbiAgICBwb3RhdG86ICdwb3RhdG9lcycsXG4gICAgcXVpejogJ3F1aXp6ZXMnLFxuICAgIHJhZGl1czogJ3JhZGlpJyxcbiAgICByZWZsZXg6ICdyZWZsZXhlcycsXG4gICAgJ3J1bm5lci11cCc6ICdydW5uZXJzLXVwJyxcbiAgICBzY2FtcG86ICdzY2FtcGknLFxuICAgIHNjYXJmOiAnc2NhcnZlcycsXG4gICAgc2Npc3NvcnM6ICdzY2lzc29ycycsXG4gICAgc2NyYXRjaDogJ3NjcmF0Y2hlcycsXG4gICAgc2VsZjogJ3NlbHZlcycsXG4gICAgc2VyaWVzOiAnc2VyaWVzJyxcbiAgICBzaGVhZjogJ3NoZWF2ZXMnLFxuICAgIHNoZWVwOiAnc2hlZXAnLFxuICAgIHNoZWxmOiAnc2hlbHZlcycsXG4gICAgJ3Nvbi1pbi1sYXcnOiAnc29ucy1pbi1sYXcnLFxuICAgIHNwZWNpZXM6ICdzcGVjaWVzJyxcbiAgICBzcGxhc2g6ICdzcGxhc2hlcycsXG4gICAgc3RpbXVsdXM6ICdzdGltdWxpJyxcbiAgICBzdGl0Y2g6ICdzdGl0Y2hlcycsXG4gICAgc3RyYXR1bTogJ3N0cmF0YScsXG4gICAgc3lsbGFidXM6ICdzeWxsYWJpJyxcbiAgICBzeW1wb3NpdW06ICdzeW1wb3NpYScsXG4gICAgc3lub3BzaXM6ICdzeW5vcHNlcycsXG4gICAgc3ludGhlc2lzOiAnc3ludGhlc2VzJyxcbiAgICB0YWJsZWF1OiAndGFibGVhdXgnLFxuICAgIHRheDogJ3RheGVzJyxcbiAgICB0aGF0OiAndGhvc2UnLFxuICAgIHRoZXNpczogJ3RoZXNlcycsXG4gICAgdGhpZWY6ICd0aGlldmVzJyxcbiAgICB0aGlzOiAndGhlc2UnLFxuICAgIHRvbWF0bzogJ3RvbWF0b2VzJyxcbiAgICB0b290aDogJ3RlZXRoJyxcbiAgICB0b3JuYWRvOiAndG9ybmFkb2VzJyxcbiAgICB0b3JwZWRvOiAndG9ycGVkb2VzJyxcbiAgICB2ZXJ0ZWJyYTogJ3ZlcnRlYnJhZScsXG4gICAgdmV0bzogJ3ZldG9lcycsXG4gICAgdml0YTogJ3ZpdGFlJyxcbiAgICB2b2xjYW5vOiAndm9sY2Fub2VzJyxcbiAgICB3YWx0ejogJ3dhbHR6ZXMnLFxuICAgIHdhc2g6ICd3YXNoZXMnLFxuICAgIHdhdGNoOiAnd2F0Y2hlcycsXG4gICAgd2hhcmY6ICd3aGFydmVzJyxcbiAgICB3aWZlOiAnd2l2ZXMnLFxuICAgIHdvbGY6ICd3b2x2ZXMnLFxuICAgIHdvbWFuOiAnd29tZW4nLFxuICAgIHplcm86ICd6ZXJvZXMnLFxuICB9O1xuXG4gIHRyYW5zZm9ybShzaW5ndWxhckVudGl0eTogc3RyaW5nLCBxdWFudGl0eTogbnVtYmVyID0gMCk6IHN0cmluZyB7XG4gICAgaWYgKCFzaW5ndWxhckVudGl0eSB8fCBzaW5ndWxhckVudGl0eSA9PT0gJycpIHtcbiAgICAgIHJldHVybiAnJztcbiAgICB9XG5cbiAgICBpZiAocXVhbnRpdHkgPT09IDEpIHtcbiAgICAgIHJldHVybiBzaW5ndWxhckVudGl0eTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgbGFzdFdvcmQgPSBzaW5ndWxhckVudGl0eS50cmltKCkuc3BsaXQoJyAnKVtzaW5ndWxhckVudGl0eS50cmltKCkuc3BsaXQoJyAnKS5sZW5ndGggLSAxXTtcbiAgICAgIGlmICh0aGlzLmlycmVndWxhck1hcFtsYXN0V29yZC50b0xvY2FsZUxvd2VyQ2FzZSgpXSkge1xuICAgICAgICBpZiAobGFzdFdvcmRbMF0gPT09IGxhc3RXb3JkWzBdLnRvTG9jYWxlVXBwZXJDYXNlKCkpIHtcbiAgICAgICAgICByZXR1cm4gc2luZ3VsYXJFbnRpdHkucmVwbGFjZShcbiAgICAgICAgICAgIGxhc3RXb3JkLFxuICAgICAgICAgICAgdGhpcy5pcnJlZ3VsYXJNYXBbbGFzdFdvcmQudG9Mb2NhbGVMb3dlckNhc2UoKV0ucmVwbGFjZShcbiAgICAgICAgICAgICAgdGhpcy5pcnJlZ3VsYXJNYXBbbGFzdFdvcmQudG9Mb2NhbGVMb3dlckNhc2UoKV1bMF0sXG4gICAgICAgICAgICAgIHRoaXMuaXJyZWd1bGFyTWFwW2xhc3RXb3JkLnRvTG9jYWxlTG93ZXJDYXNlKCldWzBdLnRvTG9jYWxlVXBwZXJDYXNlKClcbiAgICAgICAgICAgIClcbiAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHNpbmd1bGFyRW50aXR5LnJlcGxhY2UobGFzdFdvcmQsIHRoaXMuaXJyZWd1bGFyTWFwW2xhc3RXb3JkLnRvTG9jYWxlTG93ZXJDYXNlKCldKTtcbiAgICAgIH0gZWxzZSBpZiAobGFzdFdvcmRbbGFzdFdvcmQubGVuZ3RoIC0gMV0gPT09ICd5Jykge1xuICAgICAgICAvLyBOYWl2ZSBhcHByb2FjaDpcbiAgICAgICAgLy8gY29uc29uYW50K3kgPSB3b3JkIC0gJ3knICsnaWVzJ1xuICAgICAgICAvLyB2b3dlbCt5ID0gd29yZCArICdzJ1xuXG4gICAgICAgIHJldHVybiBpc1Zvd2VsKGxhc3RXb3JkW2xhc3RXb3JkLmxlbmd0aCAtIDJdKVxuICAgICAgICAgID8gc2luZ3VsYXJFbnRpdHkgKyAncydcbiAgICAgICAgICA6IHNpbmd1bGFyRW50aXR5LnJlcGxhY2UobGFzdFdvcmQsIGxhc3RXb3JkLnNsaWNlKDAsIC0xKSArICdpZXMnKTtcbiAgICAgIH0gZWxzZSBpZiAobGFzdFdvcmRbbGFzdFdvcmQubGVuZ3RoIC0gMV0gPT09ICdzJykge1xuICAgICAgICByZXR1cm4gc2luZ3VsYXJFbnRpdHkgKyAnZXMnO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHNpbmd1bGFyRW50aXR5ICsgJ3MnO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuIl19